# 工厂模式


## 1、定义
     工厂模式，又称工厂方法模式、多台工厂模式和虚拟构造器模式，工厂模式属于创建型模式
     通过定义工厂父类负责定义创建对象的公共接口，而子类则负责生产具体的对象
## 2、介绍
* 注意
    * 1、一个抽象产品类，可以派生出多个具体产品类
    * 2、一个抽象工厂类，可以派生出多个具体共产类
    * 3、每个具体工厂类只能创建一个具体产品类的实例
* 意图
    * 保创建一个创建对象的接口，让其子类自己决定实例化哪一个工厂类，工厂模式使其创建过程延迟到子类进行
* 主要解决
    * 主要解决工厂一旦需要生成新产品就需要修改工厂类的方法逻辑，即简单工厂的缺点，之所以可以解决简单工厂的问题
      因为工厂模式把具体产品的创建推迟到工厂类的子类（具体工厂类）中，此时工厂类不在负责所有产品的创建
      而只是给出具体工厂必须实现的接口，这样工厂模式在添加新产品的时候就不修改工厂类逻辑而是添加新的工程子类
      符合开放封闭原则，解决简单工厂模式中的缺点
* 何时使用
    * 当明确的计划不同条件下创建不同实例时
* 如何解决
    * 让其子类实现工厂接口，返回的也是一个抽象的产品
* 关键代码
    * 抽象产品（Product），具体产品的父类，描述产品的公共接口
      具体产品（ProductA)，抽象产品的子类，工程类创建的目标类，描述生成的具体产品
      抽象工厂（Factory），具体工程的父类，描述具体工程的公共接口
      具体工厂（FactoryA），抽象工程的子类，被外界调用，描述具体工厂，实现工厂方法创建产品的实例
* 优点
    * 更符合开-闭原则，新增一种产品，只需要增加相应的具体产品类和相应的工程子类即可
    * 符合单一职责原则，每个具体工厂类只负责创建对应的产品
    * 不是用静态工程方法，可以形成基于继承的等级结构物
    * 一个调用者想创建一个对象，只要知道其名称就可以
    * 屏蔽产品的具体实现，调用者只关心产品的接口
    * 工程模式可以说是简单工厂模式的进一步抽象跟扩展，保留简单工厂的封装优点的同时，让扩展变的更简单
      让继承变的更简单，让继承变的可行，增加了多态性的体现
* 缺点
    * 添加新产品是，除了增加新产品类外，还要提供与之对应的具体工厂类，系统类的个数将成对增加
      在一定程度上增加了系统的复杂度，同时，有更多的类需要编译和运行，给系统带来一些额外的开销
    * 考虑到系统的可扩展性，需要引入抽象层，在客户端代码中均使用抽象层进行定义，增加了系统的抽象性和理解难度
      且在实现时可能需要用到DOM、反射等技术，增加了系统的实现难度
    * 虽然保证了工程方法内的对修改的关闭，但对于使用工厂方法的类，如果要更换另外一种产品，仍然需要修改实例化的具体工厂类
    * 一个具体工厂只能创建一种具体产品
* 使用场景
    * 当一个类不知道他所需要的对象的类时，客户端不需要知道具体产品类的类名，只需要对应的工厂就可以
    * 当一个类希望通过其子类来指定创建对象时，抽象工厂类只需要提供一个创建产品的接口，子类确定具体要创建的对象
      利用面向对象的多态性和里氏代换原则，程序运行时，子类对象将覆盖父类对象，使系统更容易扩展
    * 将创建对象的任务委托给多个工程子类中的某一个，客户端在使用时可以无须关心是哪一个工厂子类创建产品子类
      需要时在动态指定，可将具体工厂类的类名存储在配置文件或数据库中
    * 日志记录器，用户可以选择记录日志到什么地方
    * 数据库访问，用户不知道系统采用哪一类数据库，以及数据库可能有变化时
    * 设计一个连接服务器的框架，需要不同的协议，可以把每个协议作为产品类，共同实现一个借口 
# 3、实现
* [java方式实现](https://github.com/nmgchfzhzhg/DesignPatternsDemo/tree/master/app/src/main/java/com/designpatterns/demo/factory/java 'java')
* [Kotlin方式实现](https://github.com/nmgchfzhzhg/DesignPatternsDemo/tree/master/app/src/main/java/com/designpatterns/demo/factory/kotlin 'Kotlin')
* UML类图：

  ![单例模式](https://github.com/nmgchfzhzhg/DesignPatternsDemo/raw/master/app/src/main/java/com/designpatterns/demo/factory/imgs/工厂模式.png)  
* 注意事项
    * 作为一个创建型模式，在任何需要生成复杂对象的地方，都可以使用工厂方法模式，有一点需要注意的地方就是复杂对象适合使用工厂模式
      简单对象，只需要通过new就可以完成创建的对象，无需使用工厂模式，如果使用工厂模式，就需要引入一个工厂类，增加系统的复杂度
## 参考链接
* [RUNOOB.COM](http://www.runoob.com/design-pattern/factory-pattern.html "RUNOOB.COM")
* [工厂方法模式（Factory Method）- 最易懂的设计模式解析](https://www.jianshu.com/p/d0c444275827 "工厂模式")