# 单例模式学习


## 1、定义
     单例模式属于创建型模式，提供一种创建对象的最佳方式。
     单例模式是确定某一个类只有一个实例，而且自行实例化并想整个系统提供这个实例，这个类称为单例类，它提供全局访问的方法。
## 2、介绍
* 注意
    * 1、单例类只能有一个实例
    * 2、单例类必须自己创建自己的唯一实例
    * 3、单例类必须给所有其他对象提供这一实例
* 意图
    * 保证一个类仅有一个实例，并提供一个访问它的全局访问点
* 主要解决
    * 一个全局使用的类频繁的创建与销毁（如读取数据库）
* 何时使用
    * 当您想控制实例数目，节省系统资源的时候
* 如何解决
    * 判断系统是否已经有这个单例，如果有则返回，如果没有则创建
* 关键代码
    * 构造函数私有化
* 优点
    * 在内存里只有一个实例，减少了内存的开销，尤其是频繁的创建和销毁实例
    * 避免对资源的多重占用（比如读写文件）
* 缺点
    * 获取对象时不能用new
    * 没有接口，不能继承
    * 与单一职责原则冲突
    * 单例对象如果持有Context，那么很容易引发内存泄露
    * 一个类应该关心内部逻辑，而不关心外面怎么样来实例化
* 使用场景
    * 要求生产唯一序列号
    * 一个对象贯穿整个应用程序，并起到全局同意管理控制作用，可以使用单例模式
    * WEB中的计数器，不用每次刷新都在数据库里加一次，用单例模式先缓存起来
    * 创建的一个对象需要消耗的资源过多，比如I/O与数据库的链接等
    * 工具类对象
# 3、实现
* 饿汉式
    * 优点：写法简单，线程安全，没有加锁，执行效率高
    * 缺点：没有懒加载效果，类加载时就初始化，造成内存的浪费
    * 描述：没有实现Lazy初始化，多线程安全，基于classloder机制避免了多线程同步问题，不过，instance在类装载时就实例化，虽然导致类装载的原因有很多种，在单例模式中大多数都是调用getInstance方法，但是也不能确定有其他的方式（或者其他的静态方法）导致类装载，这时候初始化instance显然没有达到lazy loading的效果。
    

